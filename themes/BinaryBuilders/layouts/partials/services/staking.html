{{ $title := .Title }}
<main class="page-content service-page service-page--staking">
  <!-- Animated Hero Section -->
  <section class="staking-hero">
    <div class="container">
      <div class="staking-hero__content">
        <h1 class="staking-hero__title">
          <span class="gradient-text">{{ .Title }}</span>
        </h1>
        <p class="staking-hero__description">{{ .Description }}</p>
      </div>
      <div class="staking-hero__visual">
        <div class="staking-hero__nodes">
          {{ range seq 5 }}
          <div class="node"></div>
          {{ end }}
        </div>
        {{ with .Params.hero_image }}
        <img src="{{ . }}" alt="{{ $title }}" class="staking-hero__image" />
        {{ end }}
      </div>
    </div>
  </section>

  <!-- Overview with Live Stats -->
  <section class="staking-overview">
    <div class="container">
      <div class="staking-overview__content">
        {{ .Content }}
      </div>
      <div class="staking-overview__stats">
        <div class="stat-box">
          <div class="stat-box__value">$500M+</div>
          <div class="stat-box__label">Total Value Staked</div>
        </div>
        <div class="stat-box">
          <div class="stat-box__value">99.9%</div>
          <div class="stat-box__label">Uptime</div>
        </div>
        <div class="stat-box">
          <div class="stat-box__value">15+</div>
          <div class="stat-box__label">Networks Supported</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features with Interactive Steps -->
  {{ if .Params.features }}
  <section class="staking-features">
    <div class="container">
      <h2>{{ .Params.features_title | default "Key Features" }}</h2>
      <div class="staking-features__steps" style="position: relative; padding: 2rem 0;">
        {{ range $index, $feature := .Params.features }}
        <div class="step-card" style="display: flex; align-items: center; gap: 2rem; margin-bottom: 4rem; position: relative;">
          <div class="step-card__number" style="background: #7B4DFF; color: white; border: 2px solid white; flex-shrink: 0; width: 3rem; height: 3rem; display: flex; align-items: center; justify-content: center; border-radius: 50%;">{{ add $index 1 }}</div>
          <div class="step-card__content" style="flex-grow: 1; background: rgba(123, 77, 255, 0.1); padding: 1.5rem; border-radius: 0.5rem;">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
              <div class="step-card__icon">{{ .icon }}</div>
              <h3>{{ .title }}</h3>
            </div>
            <p>{{ .description }}</p>
          </div>
        </div>
        {{ end }}
        <div style="position: absolute; top: 0; bottom: 0; left: 2.5rem; width: 2px; background: rgba(123, 77, 255, 0.2); z-index: -1;"></div>
      </div>
    </div>
  </section>
  {{ end }}

  <!-- Benefits with Animated Metrics -->
  {{ if .Params.benefits }}
  <section class="staking-benefits">
    <div class="container">
      <h2>Benefits</h2>
      <div class="staking-benefits__grid">
        {{ range .Params.benefits }}
        <div class="benefit-box">
          <div class="benefit-box__icon">{{ .icon }}</div>
          <div class="benefit-box__content">
            <h3>{{ .title }}</h3>
            <p>{{ .description }}</p>
          </div>
          <div class="benefit-box__glow"></div>
        </div>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}

  <!-- Supported Networks -->
  {{ if .Params.show_supported_networks }}
  {{ partial "supported-networks.html" . }}
  {{ end }}

  <!-- Testimonials -->
  {{ if .Params.testimonials }}
  <section class="testimonials-simple">
    <div class="container">
      <h2>What Our Partners Say</h2>
      <div class="testimonials-simple__grid">
        {{ range $index, $testimonial := .Params.testimonials }}
        <div class="testimonial-card">
          <pixel-hover 
            data-colors="{{ index (slice "#7B4DFF,#5435B4,#E464FF" "#4ECDC4,#3DA89F,#65E5DD" "#FF6B6B,#E65555,#FF8585") (mod $index 3) }}"
            data-gap="6"
            data-speed="30">
          </pixel-hover>
          <div class="testimonial-card__quote">{{ .quote }}</div>
          <div class="testimonial-card__author">
            <img src="/images/partners/{{ .logo }}.png" alt="{{ .name }} Logo" class="testimonial-card__avatar">
            <div class="testimonial-card__name">{{ .name }}</div>
          </div>
        </div>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}

  <!-- Call to Action with Network Animation -->
  <section class="staking-cta" style="padding: 4rem 0;">
    <div class="container" style="display: flex; justify-content: center; align-items: center; min-height: 200px;">
      <div class="staking-cta__content" style="text-align: center; max-width: 600px;">
        <h2>Start Staking</h2>
        <p>{{ .Params.cta_description }}</p>
        <div class="staking-cta__buttons" style="display: flex; justify-content: center; gap: 1rem;">
          {{ with .Params.primary_cta }}
          <a href="{{ .url }}" class="button button--primary" target="_blank" rel="noopener" style="padding: 1rem 2rem; border-radius: 0.5rem; font-weight: 500; transition: transform 0.3s ease; background: #7B4DFF; color: white; border: none; text-decoration: none; &:hover { transform: translateY(-2px); }">
            {{ .text }} <span class="button__arrow">â†’</span>
          </a>
          {{ end }}
        </div>
      </div>
    </div>
  </section>
</main>

<!-- Add staking animation script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Initialize node animations
  const nodes = document.querySelectorAll('.node');
  nodes.forEach((node, index) => {
    node.style.animationDelay = `${index * 0.2}s`;
  });

  // Initialize step cards
  const stepCards = document.querySelectorAll('.step-card');
  const observerOptions = {
    threshold: 0.2,
    rootMargin: '0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('active');
      }
    });
  }, observerOptions);

  stepCards.forEach(card => observer.observe(card));
});</script> 