{{ define "main" }}
<main class="page-content events-page">
  <!-- Page Header -->
  <div class="events-page-header">
    <div class="container">
      <span class="events-category">COMMUNITY EVENTS</span>
      <h1 class="events-title">{{ .Title }}</h1>
      <p class="events-description">{{ .Description }}</p>
    </div>
  </div>

  <!-- Events List -->
  <section class="events-list">
    <div class="events__cosmic-bg"></div>
    <div class="container">
      <!-- Upcoming Events -->
      <div class="events-section">
        <h2 class="events-section-title">
          <span class="gradient-text">Upcoming Events</span>
        </h2>
        {{ $now := now }}
        {{ $hasUpcoming := false }}
        {{ range .Pages.ByDate }}
          {{ if ge (time .Params.event_date) $now }}
            {{ $hasUpcoming = true }}
            <div class="event-card event-card--listing">
              {{ with .Params.image }}
              <div class="event-card__image">
                <img src="{{ . }}" alt="{{ $.Title }}" />
              </div>
              {{ end }}
              <div class="event-card__content">
                <div class="event-card__meta">
                  {{ with .Params.event_date }}
                  <span class="event-date">{{ dateFormat "January 2, 2006" . }}</span>
                  {{ end }}
                  {{ with .Params.event_location }}
                  <span class="event-location">{{ . }}</span>
                  {{ end }}
                </div>
                <h3>{{ .Title }}</h3>
                <p>{{ .Description }}</p>
                {{ with .Params.event_link }}
                <a href="{{ . }}" class="event-card__link" target="_blank" rel="noopener noreferrer">
                  <span>Learn More</span>
                  <span class="event-card__link-arrow">→</span>
                </a>
                {{ end }}
              </div>
              <div class="event-card__constellation"></div>
              <div class="event-card__visual">
                <div class="event-card__particles"></div>
              </div>
            </div>
          {{ end }}
        {{ end }}
        {{ if not $hasUpcoming }}
          <div class="event-card event-card--empty">
            <div class="event-card__content">
              <h3>See you at the next event!</h3>
              <p>Come along as we unpack the complex and fascinating world of blockchain through our diverse projects and collaborations. We look under the hood of protocols, Layer2 solutions and developer tools. From technical tutorials to in-depth research, there's much to explore.</p>
            </div>
          </div>
        {{ end }}
      </div>

      <!-- Past Events -->
      <div class="events-section">
        <h2 class="events-section-title">
          <span class="gradient-text">Past Events</span>
        </h2>
        {{ $hasPast := false }}
        {{ range .Pages.ByDate.Reverse }}
          {{ if lt (time .Params.event_date) $now }}
            {{ $hasPast = true }}
            <div class="event-card event-card--listing event-card--past">
              {{ with .Params.image }}
              <div class="event-card__image">
                <img src="{{ . }}" alt="{{ $.Title }}" />
              </div>
              {{ end }}
              <div class="event-card__content">
                <div class="event-card__meta">
                  {{ with .Params.event_date }}
                  <span class="event-date">{{ dateFormat "January 2, 2006" . }}</span>
                  {{ end }}
                  {{ with .Params.event_location }}
                  <span class="event-location">{{ . }}</span>
                  {{ end }}
                </div>
                <h3>{{ .Title }}</h3>
                <p>{{ .Description }}</p>
                {{ with .Params.event_link }}
                <a href="{{ . }}" class="event-card__link" target="_blank" rel="noopener noreferrer">
                  <span>View Details</span>
                  <span class="event-card__link-arrow">→</span>
                </a>
                {{ end }}
              </div>
              <div class="event-card__constellation"></div>
              <div class="event-card__visual">
                <div class="event-card__particles"></div>
              </div>
            </div>
          {{ end }}
        {{ end }}
        {{ if not $hasPast }}
          <div class="event-card event-card--empty">
            <div class="event-card__content">
              <h3>No Past Events</h3>
              <p>Stay tuned for our upcoming events and join us in exploring the future of blockchain technology.</p>
            </div>
          </div>
        {{ end }}
      </div>
    </div>
  </section>
</main>
{{ end }} 